%\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage[french]{babel}
\usepackage{xspace}  % pour espaces intelligents autour des guillemets français


% font du type Palladio pour le texte et les maths
\usepackage{mathpazo}
%\usepackage{mathabx}			% ???
%\usepackage[no-math]{fontspec}
%\setmainfont{Charis SIL}
%\usepackage[bigdelims,vvarbb]{newpxmath}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% STEP 2: Set the boolean (true/false) values for the document custom variables
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{ifthen}

\provideboolean{DRAFTMODE}				% if PROOFREADING=true:
\setboolean{DRAFTMODE}{true}			%   10pt, dblspaced, source line nums, 8.5'' x 11'' paper

\provideboolean{IPAD}						% IPAD=true 12pt, sansserif, 6''x~8'' paper
\setboolean{IPAD}{false}					% IPAD=false    10pt, cm, print, 5.5'' x 8.5''  

\provideboolean{FORPRINT}					% FORPRINT=true 	     special pagebreaks for print version 
\setboolean{FORPRINT}{true}				% FORPRINT=false

\provideboolean{SYMMETRIC}				% SYMMETRIC=true 	     SYMMETRIC page margins (for screen version of PDF)
\setboolean{SYMMETRIC}{true}			% SYMMETRIC=false

\provideboolean{PG13}		% 	PG13=true 	No swearwords please, no pot, vodka ok, humanist and anti-corporate propaganda ok.
\setboolean{PG13}{false}	%	PG13=false	Tell it like it is!

\provideboolean{TUTORIAL}					% for SYMPY tutorial Appendix  
\setboolean{TUTORIAL}{false}				% if TUTORIAL==true: show extra defs and repeats of explanations 

\provideboolean{FORLA}					% if FORLA:  show extra content in SYMPY tutorial intended for LA book
\setboolean{FORLA}{false}				% if not FORLA:  show only content for MathPhys book
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%










%\usepackage[
%papersize={8.5in,11in},
%verbose,
%tmargin=2cm,
%bmargin=2cm,
%lmargin=3cm,
%rmargin=3cm,
%headsep=0.7cm,
%marginparwidth=1.2cm,
%marginparsep=0.6cm,
%footskip=1cm
%]{geometry}

\usepackage{float}              % FOR [H] option for figures
\usepackage{enumitem}	% causing trouble with exercises... Nov 26 (TODO: try to enable exercises/problems)
\usepackage{fancyhdr}
\usepackage{textcase}
\fancypagestyle{plain}{
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}
	\fancyfoot[C]{\footnotesize\thepage}	    
}
\pagestyle{fancy}
\fancyhf{}
\fancyhead{} 
\makeatletter
\renewcommand{\sectionmark}[1]{\markright{\thesection~~\MakeTextUppercase{#1}}}
\renewcommand{\chaptermark}[1]{\markboth{\MakeTextUppercase{#1}}{}}
\makeatother
\fancyhead[LE]{\footnotesize\thepage}
\fancyhead[CE]{\footnotesize\sc \leftmark}	 		% \nouppercase
\fancyhead[CO]{\footnotesize\sc \rightmark}
\fancyhead[RO]{\footnotesize\thepage}
\renewcommand{\headrulewidth}{0pt} 			% no line plz



%\usepackage{setspace}	% double interligne pour faciliter la correction
%\doublespacing


\usepackage{hyperref}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}


% see below
%\usepackage{makeidx}
%\makeindex
%\newcommand{\emphindexdef}[1]{\emph{#1}\index{#1|textit}}
%\usepackage{graphicx}


\usepackage{tabularx}
\usepackage{longtable}


%----------------- pour les figures -----------------

\def\captionwidth {100mm}
\makeatletter
\AtBeginDocument{%
%---------------------------------
\long\def\@makecaption #1#2{%
\vskip\abovecaptionskip
% #1 =\figurename  \thefigure 
% #2 = texte de caption
\sbox\@tempboxa {\small #1\captionsep \captionfont  #2}%
\ifdim \wd\@tempboxa >\hsize 
\centerline{\vbox{\hsize \captionwidth \small
{\rm #1}\captionsep \captionfont  #2\endgraf}}\par
\else \global \@minipagefalse 
\hb@xt@\hsize{\hss\box\@tempboxa\hss}%
\fi
\vskip\belowcaptionskip
}%
}% fin \AtBeginDocument

\def\captionfont {\itshape  } % \itshape \slshape \sffamily
\def\captionlong [#1]#2{\def\captionwidth {#1}\caption{#2}}
\def\captionshort #1{\caption{#1}}
 
\def\legende {\futurelet \token \legendechoice }
\def\legendechoice 
{\ifx\token [  \expandafter\captionlong 
\else \expandafter\captionshort \fi }

\abovecaptionskip =5mm plus 1mm minus 2mm
\belowcaptionskip =3mm plus 1mm 
\def\captionsep {.\ --- \ignorespaces}

\makeatother

%--------------- fin des figures ------------







%: — puce simple
%\def \puce {\smallskip \leavevmode\raise 2pt\hbox{$\scriptstyle\triangleright$}\enspace %\ignorespaces }
\def\puce #1\par
{\smallskip\begingroup \hangindent 30pt  
\noindent
\hskip 30pt \llap {$\triangleright$\enspace}\ignorespaces #1\par \endgroup }


% see below
%% for single words --- micro censorship :) --- we can write a latex macro
%\newcommand{\pgt}[2]{#2}




% guillemets français: fonctionne seulement sous XeLaTeX
%\catcode`«=\active
%\def«{\og}
%\catcode`»=\active
%\def»{\fg}

\chaptermark{Chapitre}







%
%%%%   PAGE GEOMETRY SETTINGS    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\raggedbottom
%\ifthenelse{\boolean{DRAFTMODE}} {
%
%	%%  PROOFREADING  SETTINGS	   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\usepackage{setspace} 
	\doublespacing
%	\usepackage[	papersize={8.5in,11in},verbose,tmargin=2cm,bmargin=2cm,lmargin=3cm,rmargin=3cm,
%				headsep=0.3cm,marginparwidth=1.2cm,marginparsep=0.6cm,footskip=0.7cm]{geometry}
%	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%}{
%	\ifthenelse{\boolean{IPAD}}{
%	
%		%%   IPAD SETTINGS   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%		\usepackage[	papersize={6in,7.84375in},
%					hmarginratio=1:1,
%					includeheadfoot,
%		 			headsep=3mm,	 
%					tmargin=4mm,				% \
%					lmargin=6mm,				%   \
%					rmargin=6mm,				%	 WAS margin=6mm	
%					bmargin=4mm, 				%   /
%					verbose]{geometry}
%		% CM SANS SERIF 
%		\renewcommand*\familydefault{\sfdefault} 
%		%
%		% PALATINO nice 
%		% \usepackage{palatino}
%		%
%		% HELVETICA
%		% \usepackage[scaled]{helvet}
%		%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%	}{
%	
%		%%   FOR  PRINT    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%		%
%		%
%		\ifthenelse{\boolean{SYMMETRIC}}{
%		 	% WITH SYMMETRIC MARGINS FOR PDF PREVIEW    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%			\usepackage[	papersize={5.5in,8.5in},
%						verbose,
%						headsep=0.3cm,		  
%						tmargin=1.5cm,
%						lmargin=1.7cm,
%						rmargin=1.7cm,
%						bmargin=1.3cm,
%						footskip=0.5cm]{geometry}
%			%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%			% use		papersize={8.5in,11in}, lmargin=2.5cm, rmargin=8.52cm,			% for 8.5" x 11" full page print
%
%		}{
%		 	% NON-SYMMETRIC MARGINS FOR PRINTING    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%			%
%			%
%			% LULU   5.5"x8.5"    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%			\usepackage[	papersize={5.5in,8.5in},
%						verbose,
%						headsep=0.3cm,		  
%						tmargin=1.5cm,
%						lmargin=2.25cm,			% for print lulu  		
%						rmargin=1.15cm,
%						bmargin=1.3cm,
%						footskip=0.5cm]{geometry}
%			%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%			% LULU HARDCOVER 6x9 = US trade  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%			%	\usepackage[	papersize={6in,9in},
%			%				verbose,
%			%				headsep=0.4cm,		  
%			%				tmargin=2.135cm,		
%			%				lmargin=2.90cm,
%			%				rmargin=1.77cm,		% for print 6 x 9
%			%				bmargin=1.935cm,
%			%				footskip=0.7cm]{geometry}
%			%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%			% IngramSpark version:   5.625x8.75"	=  5.5x8.5"  + 0.125 bleed on 3 sides   %%%%%%%%%%%%%%%%%%%%%%%
%			%	\usepackage[	papersize={5.625in,8.75in},			% 
%			%				verbose,
%			%				headsep=0.3cm,		  
%			%				tmargin= 18.175mm,		% 1.5cm + 0.125"
%			%				lmargin=2.25cm,
%			%				rmargin= 14.675mm,		%	right = 11.5+3.175
%			%				bmargin= 16.175mm,  	% 13+3.175
%			%				footskip=0.5cm]{geometry}
%			%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%	
%		}  % /SYMMETRIC
%		
%	}  % /PRINT
%
%}   % /not-DRAFTMODE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%



%%%   MANUAL CLEARPAGE COMMANDS    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifthenelse{\boolean{FORPRINT}} {					% Special line breaks for print version  
	\newcommand{\printcp}{\clearpage}
	\newcommand{\printni}{\noindent}
}{
	\newcommand{\printcp}{}
	\newcommand{\printni}{}
}

\ifthenelse{\boolean{IPAD}} {						% Special linebreaks for iPad version  
	\newcommand{\ipadcp}{\newpage}
	\newcommand{\ipadni}{\noindent}
}{
	\newcommand{\ipadcp}{}
	\newcommand{\ipadni}{}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%   LATEX PACKAGES    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[T1]{fontenc} 					% use T1 encoding

%\usepackage{cmap}					% for copy pastable text in PDF
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}				% English hyphenation
\usepackage{ucs}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{longtable}					% for table compatibility with PolyTeX
\usepackage{moreverb}
\usepackage{color}
\usepackage{listings}
\usepackage{lastpage}
%\pdfminorversion=3					% for generating PDF v1.3 --- which is closest to PDF/X-3:2002
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{float}							% FOR [H] option for figures
\usepackage[verbose]{wrapfig}
% \usepackage[section]{placeins}
%\usepackage[inline]{enumitem}

% removed Nov 25
%\setitemize{itemsep=-0.03in}					% Lists were to airy (tighten)
%\renewcommand{\labelitemii}{$\triangleright$}		% 2nd level itemize


%\setlist{nolistsep}
%\setitemize{topsep=0.5em}
%\setitemize{partopsep=0.5em}
%\setitemize{topsep=0.5em}
\usepackage{pdfpages}						% for including cover
\usepackage{mathtools}						% for \shortintertext  
\usepackage{emptypage}						% really blank page at the end of chapter
\usepackage{cancel}
%\usepackage{textcomp}						% for \textquotesingle, foot and inch units in appendix)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%   FONTS    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{mathpazo}		% PALATINO (chosen Sep 10 2017)
\usepackage{mathabx}
%\usepackage{eulervm}		% another source of math -- less italic

%\usepackage{kpfonts}				% KP Serif
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%   INDEX    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{makeidx}
\makeindex
\usepackage[nottoc]{tocbibind}								% Index in TOC
\usepackage{etoolbox}
\csappto{theindex}{\label{thebookindex}}						% enable pageref to Index
\newcommand{\emphindexdef}[1]{\emph{#1}\index{#1|textit}}		% Used for term definition --- emph and index entry in italics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%   PAGE HEADERS and FOOTERS    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}
\usepackage{textcase}
\fancypagestyle{plain}{
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}
	\fancyfoot[C]{\footnotesize\thepage}	    
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{fancy}
\fancyhf{}
\fancyhead{} 
\makeatletter
\renewcommand{\sectionmark}[1]{\markright{\thesection~~\MakeTextUppercase{#1}}}
\renewcommand{\chaptermark}[1]{\markboth{\MakeTextUppercase{#1}}{}}
\makeatother
\fancyhead[LE]{\footnotesize\thepage}
\fancyhead[CE]{\footnotesize\sc \leftmark}	 		% \nouppercase
\fancyhead[CO]{\footnotesize\sc \rightmark}
\fancyhead[RO]{\footnotesize\thepage}
\renewcommand{\headrulewidth}{0pt} 			% no line plz
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 


%%%   NO BULLSHIT CUSTOM FORMATTING COMMANDS   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{secnumdepth}{1}						% table of contents up to section level
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifthenelse{\boolean{IPAD}}{}{  
    % Enhance intra-book links with pagerefs (used only for print versions)
    % TODO: remove \hyperref as it is not used anymore
    \let\savedHyperref=\hyperref
    \renewcommand*{\hyperref}[2][\hyperrefwpageref]{%
        \def\hyperrefwpageref{#2}\savedHyperref[#1]{\ignorespaces#2 (page \pageref*{#1})\unskip}}  
    % Thanks to Stefan Kottwitz for http://bit.ly/13fMGvN 
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand\softsection[1]{				% SOFT SECTION  =  Not numbered but shows in TOC and sets headers
  \section*{#1}%
  \addcontentsline{toc}{section}{#1}
  \markright{\MakeTextUppercase{#1}}
}
\newcommand\softchapter[1]{%
   \chapter*{#1}%
   \addcontentsline{toc}{chapter}{#1}%
   \markboth{\MakeTextUppercase{#1}}{}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\mycenteredheading}[1]{
{\centering
	\textbf{\Large #1}

}
	\vspace*{5mm}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\button}[1]{\fbox{#1\phantom{\small l}\!}}				% for calculator buttons
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\COMMENT}[1]{\noindent [{\color{blue}\textit{#1}}]} 		% for visible comments that will show up in blue  
%\newcommand{\COMMENT}[1]{}		% comments turned off
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CENSORSHIP MACROS
% example usage:
%   \ifthenelse{\boolean{PG13}}{
%       Check this stuff out:
%   }{
%       Check this shit out:
%   }
%
% for single words --- micro censorship :) --- we can write a latex macro
\newcommand{\pgt}[2]{\ifthenelse{\boolean{PG13}}{\ignorespaces#1\unskip}{\ignorespaces#2\unskip}}
% example usage:   Check this \pgt{stuff}{shit} out:
%%%   SHADED BOX environment   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{shadethm}
\newshadetheorem{shadetheorem}{Theorem}
\renewcommand{\theshadeshadetheorem}{}			% turn off theorem numbering
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%   FIGURES   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage[small, bf, tableposition=top]{caption}	% Small text in figure captions ???
\usepackage{booktabs}						% for table rules (toprule, midrule, bottomrule)
\usepackage{arydshln}						% for \hdashline
\usepackage{subfigure}						% Math exercise figs and Riemann sum in calculus
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%   EXERCISES and PROBLEMS    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\ifthenelse{\boolean{SOLSINTHEBACK}}{
%  \usepackage{answers}          % answers in the back only
%}{
%  \usepackage[nosolutionfiles]{answers}   % inline answers for use when proofrading
%}
\usepackage{multicol}
\setlength{\multicolsep}{5.0pt plus 2.0pt minus 1.5pt}  % 50% of original values
	\def\twocol{\begin{multicols}{2}}
	\def\endtwocol{\end{multicols}}
	\def\threecol{\begin{multicols}{3}}
	\def\endthreecol{\end{multicols}}
	\def\fourcol{\begin{multicols}{4}}
	\def\endfourcol{\end{multicols}}
	\def\fivecol{\begin{multicols}{5}}
	\def\endfivecol{\end{multicols}}
%\usepackage{pifont}						% for \ding in exercises
\usepackage{wasysym}					% for octagon symbol
\usepackage{xcolor}
\usepackage{tikz}
	\usetikzlibrary{arrows}
	\usetikzlibrary{patterns}
	\usetikzlibrary{decorations}
	\usetikzlibrary{matrix}
	\usetikzlibrary{snakes}
	\usetikzlibrary{calc}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



% new macros defined in number repr.
\def\virg{\raise 2pt\hbox{\hskip .2pt ,}}
\def\qetq{\quad\hbox{et}\quad}
\def\pgcd{\textrm{PGCD}}
\def\ppcm{\textrm{PPCM}}


% virgules FR --- if pas d'espace si <chiffre>,<chiffre>
\usepackage{icomma}
